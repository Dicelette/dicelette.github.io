(self.webpackChunkdicelette_docs=self.webpackChunkdicelette_docs||[]).push([[144],{6472:(e,s,a)=>{"use strict";a.r(s),a.d(s,{assets:()=>B,contentTitle:()=>R,default:()=>I,frontMatter:()=>z,metadata:()=>E,toc:()=>P});var t=a(3274),r=a(5618),i=a(6862),l=a(752),n=a(2735),c=a(7051),o=a(5490),m=a(1924),u=a(845);const d=e=>{let{onClick:s}=e;return(0,t.jsx)(u.A,{onClick:s,size:"small",children:(0,t.jsx)(m.A,{})})};var x=a(8954),p=a(2115);const g=e=>{let{className:s,label:a,name:r}=e;return(0,t.jsx)(l.D0,{name:r,children:e=>{let{field:r}=e;return(0,t.jsx)(x.A,{className:s,control:(0,t.jsx)(p.A,{"aria-label":r.name,onChange:r.onChange,checked:r.checked,name:r.name,value:r.value}),labelPlacement:"start",label:a})}})},v=e=>{let{children:s,label:a,onAdd:r}=e;return(0,t.jsxs)("section",{className:"flex flex-col",children:[(0,t.jsxs)("span",{className:"text-lg font-bold mb-2",children:[a,r&&(0,t.jsx)(d,{onClick:r})]}),s]})};var h=a(1881);const b=e=>(0,t.jsx)(l.D0,{name:e.name,children:s=>{let{field:a,form:{errors:r}}=s;return(0,t.jsx)(h.A,{...e,value:a.value,onChange:e.onChange??a.onChange,onBlur:a.onBlur,autoFocus:e.autoFocus,className:`xl:w-[200px] !mb-0 min-[0px]:max-xl:w-full ${e.className}`,error:void 0!==r[a.name],label:e.label,size:"small",name:a.name,type:e.type,typeof:e.type})}}),f=e=>(0,t.jsx)(l.D0,{name:e.name,children:s=>{let{field:a,form:{errors:r}}=s;return(0,t.jsx)(h.A,{...e,value:a.value,onChange:e.onChange??a.onChange,onBlur:a.onBlur,autoFocus:e.autoFocus,className:`!mb-4 w-[400px] min-[0px]:max-xl:w-full ${e.className}`,error:void 0!==r[a.name],label:e.label,size:"small",name:a.name,type:e.type,typeof:e.type,inputProps:e.inputProps})}});function j(e,s){return e.failure===e.success||"failure"===s&&e.failure<0||"success"===s&&e.success<0?"error":""}const N=e=>{let{critical:s}=e;return(0,t.jsxs)(v,{label:"Critique",children:[(0,t.jsx)(f,{label:(0,c.T)({message:"Succ\xe8s"}),name:"critical.success",type:"number",id:"critical",className:`success ${j(s,"success")}`,inputProps:{min:0}}),(0,t.jsx)(f,{label:(0,c.T)({message:"\xc9chec"}),name:"critical.failure",type:"number",id:"critical",className:`failure ${j(s,"failure")}`,inputProps:{min:0}}),(a=s,a.failure===a.success?(0,t.jsx)(o.m_,{id:"critical",anchorSelect:"#critical",content:(0,c.T)({message:"Les deux valeurs ne peuvent \xeatre identiques"}),style:{background:"var(--rt-color-error)"}}):a.failure<0?(0,t.jsx)(o.m_,{id:"critical",anchorSelect:".failure",content:(0,c.T)({message:"La valeur ne peut pas \xeatre inf\xe9rieure \xe0 0"}),style:{background:"var(--rt-color-error)"}}):a.success<0?(0,t.jsx)(o.m_,{id:"critical",anchorSelect:".success",content:(0,c.T)({message:"La valeur ne peut pas \xeatre inf\xe9rieure \xe0 0"}),style:{background:"var(--rt-color-error)"}}):void 0)]});var a};var y=a(9474),T=a(3411);const $=e=>{let{onClick:s}=e;return(0,t.jsx)(u.A,{onClick:s,size:"small",children:(0,t.jsx)(T.A,{})})};var k=a(9576);const C=e=>{let{onClick:s}=e;return(0,t.jsx)(u.A,{onClick:s,size:"small",children:(0,t.jsx)(k.A,{})})},w=e=>{let{values:s}=e;const[a,r]=(0,y.useState)([]);(0,y.useEffect)((()=>{(()=>{const e=[];s.damages.forEach(((a,t)=>{const r=s.damages.findIndex(((e,s)=>s!==t&&e.name===a.name));-1===r||e.includes(t)||(e.push(t),e.push(r))})),r(e)})()}),[s.damages]);const i=e=>a.includes(e)?(0,t.jsx)(o.m_,{id:`Nom-${e}`,content:(0,c.T)({message:"Ce nom est d\xe9j\xe0 utilis\xe9"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Nom-${e}`}):0===s.damages[e].name.length?(0,t.jsx)(o.m_,{id:`Nom-${e}`,content:(0,c.T)({message:"Le nom ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Nom-${e}`}):null;return(0,t.jsx)("div",{className:"statistic",children:(0,t.jsx)(l.ED,{name:"damages",children:e=>{let{push:r,remove:n}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(v,{label:(0,c.T)({message:"D\xe9s"}),onAdd:()=>r({name:"",value:""}),children:""}),(0,t.jsx)("table",{className:"w-full",children:(0,t.jsx)("tbody",{className:"divide-y block w-full",children:s.damages.map(((e,m)=>(0,t.jsxs)("tr",{className:"flex flex-col xl:flex-row items-start xl:w-full "+(a.includes(m)?"bg-rose-300":""),children:[(0,t.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,t.jsx)(b,{name:`damages[${m}].name`,label:(0,c.T)({message:"Nom"}),className:""+(0===s.damages[m].name.length?"error":""),id:`Nom-${m}`}),(0,t.jsx)(l.Kw,{name:`damages[${m}].name`})]}),(0,t.jsx)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:(0,t.jsx)(b,{name:`damages[${m}].value`,label:(0,c.T)({message:"Valeur"}),className:""+(0===s.damages[m].name.length?"error":""),id:`Value-${m}`})}),i(m),0===s.damages[m].name.length&&(0,t.jsx)(o.m_,{id:`Value-${m}`,content:(0,c.T)({message:"La valeur ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Value-${m}`}),(0,t.jsxs)("td",{colSpan:2,children:[(0,t.jsx)(C,{onClick:()=>n(m)}),(0,t.jsx)($,{onClick:()=>{r({name:"",value:s.damages[m].value})}})]})]},m)))})})]})}})})},L=()=>(0,t.jsxs)(v,{label:"G\xe9n\xe9ral",children:[(0,t.jsx)(g,{className:"self-start !ml-0 -mt-2 mb-6",label:(0,c.T)({message:"Rendre obligatoire le nom du personnage"}),name:"isCharNameRequired"}),(0,t.jsx)(f,{label:(0,c.T)({message:"Total"}),name:"total",id:"total",type:"number",inputProps:{min:0}}),(0,t.jsx)(f,{label:(0,c.T)({message:"D\xe9 principal"}),name:"diceType"})]});var S=a(5640);const A=e=>{let{values:s}=e;const[a,r]=(0,y.useState)([]);(0,y.useEffect)((()=>{(()=>{const e=[];s.statistics.forEach(((a,t)=>{const r=s.statistics.findIndex(((e,s)=>s!==t&&e.name===a.name));-1===r||e.includes(t)||(e.push(t),e.push(r))})),r(e)})()}),[s.statistics]);const i=e=>{if(s.statistics[e].min)return s.statistics[e].min&&s.statistics[e].max&&s.statistics[e].min>s.statistics[e].max?(0,t.jsx)(o.m_,{id:`Min-${e}`,content:(0,c.T)({message:"La valeur minimale ne peut pas \xeatre sup\xe9rieure \xe0 la valeur maximale"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Min-${e}`}):s.statistics[e].min<0?(0,t.jsx)(o.m_,{id:`Min-${e}`,content:(0,c.T)({message:"La valeur minimale ne peut pas \xeatre n\xe9gative"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Min-${e}`}):isNaN(parseInt(s.statistics[e].min,10))?(0,t.jsx)(o.m_,{id:`Min-${e}`,content:(0,c.T)({message:"La valeur minimale doit \xeatre un nombre"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Min-${e}`}):null},n=e=>{if(s.statistics[e].max)return s.statistics[e].min&&s.statistics[e].max&&s.statistics[e].min>s.statistics[e].max?(0,t.jsx)(o.m_,{id:`Max-${e}`,content:(0,c.T)({message:"La valeur maximale ne peut pas \xeatre inf\xe9rieure \xe0 la valeur minimale"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Max-${e}`}):s.statistics[e].max<0?(0,t.jsx)(o.m_,{id:`Max-${e}`,content:(0,c.T)({message:"La valeur maximale ne peut pas \xeatre n\xe9gative"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Max-${e}`}):isNaN(parseInt(s.statistics[e].max,10))?(0,t.jsx)(o.m_,{id:`Max-${e}`,content:(0,c.T)({message:"La valeur maximale doit \xeatre un nombre"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Max-${e}`}):null},m=e=>{if(s.statistics[e].min)return S.log(s.statistics[e].min,s.statistics[e].max),s.statistics[e].min&&s.statistics[e].max&&s.statistics[e].min>s.statistics[e].max||s.statistics[e].min<0||isNaN(parseInt(s.statistics[e].min,10))?"error":""},u=e=>{if(s.statistics[e].max)return s.statistics[e].min&&s.statistics[e].max&&s.statistics[e].min>s.statistics[e].max||s.statistics[e].max<0||isNaN(parseInt(s.statistics[e].max,10))?"error":""},d=e=>{if(0===s.statistics[e].name.length)return"error"};return(0,t.jsx)("div",{className:"statistic",children:(0,t.jsx)(l.ED,{name:"statistics",children:e=>{let{push:r,remove:x}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(v,{label:(0,c.T)({message:"Statistiques"}),onAdd:()=>r({name:"",values:{min:0,max:0,combinaison:""}}),children:""}),(0,t.jsx)("table",{className:"w-full",children:(0,t.jsx)("tbody",{className:"divide-y block w-full",children:s.statistics.map(((e,p)=>{return(0,t.jsxs)("tr",{className:`\n\t\t\t\t\t\t\t\t\t\tflex flex-col xl:flex-row items-start xl:w-full ${0===p?"border-t-0":""}  ${a.includes(p)?"bg-rose-300":""} xl:h-18`,children:[(0,t.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,t.jsx)(b,{label:(0,c.T)({message:"Nom"}),name:`statistics[${p}].name`,id:`Nom-${p}`,className:`${d(p)}`,"data-tooltip-variant":"error"}),(0,t.jsx)(l.Kw,{name:`statistics[${p}].name`}),(g=p,0===s.statistics[g].name.length?(0,t.jsx)(o.m_,{id:`Nom-${g}`,content:(0,c.T)({message:"Le nom ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Nom-${g}`}):a.includes(g)?(0,t.jsx)(o.m_,{id:`Nom-${g}`,content:(0,c.T)({message:"Ce nom est d\xe9j\xe0 utilis\xe9"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Nom-${g}`}):null)]}),(0,t.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,t.jsx)(b,{type:"number",inputProps:{min:0},name:`statistics[${p}].min`,label:(0,c.T)({message:"Min"}),className:`xl:w-[100px] ${m(p)}`,id:`Min-${p}`,"data-tooltip-variant":"error",disabled:!!s.statistics[p].combinaison}),i(p)]}),(0,t.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,t.jsx)(b,{type:"number",inputProps:{min:0},name:`statistics[${p}].max`,label:(0,c.T)({message:"Max"}),id:`Max-${p}`,className:`xl:w-[100px] ${u(p)}`,disabled:!!s.statistics[p].combinaison}),n(p)]}),(0,t.jsx)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:(0,t.jsx)(b,{label:(0,c.T)({message:"Combinaison"}),name:`statistics[${p}].combinaison`,disabled:!(!s.statistics[p].min&&!s.statistics[p].max)})}),(0,t.jsxs)("td",{colSpan:2,children:[(0,t.jsx)(C,{onClick:()=>x(p)}),(0,t.jsx)($,{onClick:()=>{r({name:"",values:s.statistics[p].values})}})]})]},p);var g}))})})]})}})})};var M=a(5640);function _(e){switch(M.error(e),e){case"error.emptyObject":return(0,c.T)({message:"L'objet est vide"});case"common.space":return(0,c.T)({message:" : "});case"error.invalidDice.withoutDice":case"error.invalidDice":return(0,c.T)({message:"Le d\xe9 est invalide"});case"error.invalidFormula":return(0,c.T)({message:"La formule est invalide"});case"error.maxGreater":return(0,c.T)({message:"Le maximum est sup\xe9rieur au minimum"});case"error.tooManyDice":return(0,c.T)({message:"Trop de d\xe9s (max : 25)"});case"error.noStat":return(0,c.T)({message:"Aucune statistique n'a \xe9t\xe9 trouv\xe9e"})}}var D=a(6937);const q=()=>{const e=e=>{let s={},a={};for(const i of e.statistics)s[i.name]={combinaison:i.combinaison,max:i.max,min:i.min};for(const i of e.damages)a[i.name]=i.value;0===Object.keys(s).length&&(s=void 0),0===Object.keys(a).length&&(a=void 0);const t={charName:e.isCharNameRequired,critical:e.critical,diceType:e.diceType,total:e.total,statistics:s,damage:a};try{const e=(0,n.Ff)(t),s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download="statisticalTemplate.json",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)}catch(r){const e=function(e){const s=e.message,a=s.match(/\[(.*)\]/gi);let t="";if(a){const e=a[0].replace("[","").replace("]","").split(",");for(const s of e)t+=_(s.trim())}return t+s.replace(/\[(.*)\]/gi,"")}(r);alert(e)}},s=e=>(()=>{if(!(0,D.A)())return!1;const e=document.getElementsByClassName("error"),s=document.getElementsByClassName("bg-rose-300");return e.length>0||s.length>0})()?(0,t.jsx)(i.A,{type:"submit",disabled:!0,variant:"outlined",size:"medium",id:"disabledButton",className:"download-button",children:(0,c.T)({message:"T\xe9l\xe9charger le mod\xe8le"})}):(0,t.jsx)(i.A,{type:"submit",disabled:e,variant:"outlined",size:"medium",className:"download-button",children:(0,c.T)({message:"T\xe9l\xe9charger le mod\xe8le"})});return(0,t.jsx)(l.l1,{initialValues:{isCharNameRequired:!1,statistics:[],total:0,diceType:"",critical:{success:20,failure:1},damages:[]},onSubmit:(s,a)=>{let{setSubmitting:t}=a;setTimeout((()=>{e(s),t(!1)}),400)},children:e=>{let{isSubmitting:a,values:r}=e;return(0,t.jsxs)(l.lV,{children:[(0,t.jsx)(L,{}),(0,t.jsx)(N,{critical:r.critical}),(0,t.jsx)(A,{values:r}),(0,t.jsx)(w,{values:r}),s(a)]})}})},z={sidebar_label:"Aide \xe0 la cr\xe9ation de mod\xe8le",title:"Aide \xe0 la cr\xe9ation d'un mod\xe8le"},R=void 0,E={id:"model/register/form",title:"Aide \xe0 la cr\xe9ation d'un mod\xe8le",description:"Le formulaire suivant vous aidera \xe0 cr\xe9er un mod\xe8le de fichier de configuration pour votre serveur. Les modalit\xe9s de v\xe9rification sont les m\xeames que par le bot, donc si vous avez des erreurs, vous pouvez les corriger ici plut\xf4t que manuellement.",source:"@site/docs/model/register/form.mdx",sourceDirName:"model/register",slug:"/model/register/form",permalink:"/docs/model/register/form",draft:!1,unlisted:!1,editUrl:"https://github.com/Dicelette/docs/tree/main/docs/model/register/form.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Aide \xe0 la cr\xe9ation de mod\xe8le",title:"Aide \xe0 la cr\xe9ation d'un mod\xe8le"},sidebar:"model",previous:{title:"R\xe9f\xe9rence de mod\xe8le de serveur",permalink:"/docs/model/register/template"},next:{title:"Limitation",permalink:"/docs/model/register/limitation"}},B={},P=[];function F(e){const s={p:"p",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:'Le formulaire suivant vous aidera \xe0 cr\xe9er un mod\xe8le de fichier de configuration pour votre serveur. Les modalit\xe9s de v\xe9rification sont les m\xeames que par le bot, donc si vous avez des erreurs, vous pouvez les corriger ici plut\xf4t que manuellement.\nEnsuite, il vous suffira de cliquer sur "T\xe9l\xe9charger le mod\xe8le" pour obtenir un fichier de configuration pr\xeat \xe0 \xeatre utilis\xe9.'}),"\n",(0,t.jsx)(q,{})]})}function I(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(F,{...e})}):F(e)}},4654:()=>{},4149:()=>{},9780:()=>{},9926:()=>{},124:()=>{},1220:()=>{},8854:()=>{},5222:()=>{}}]);