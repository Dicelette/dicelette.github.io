(self.webpackChunkdicelette_docs=self.webpackChunkdicelette_docs||[]).push([[50],{3375:(e,t,s)=>{"use strict";s.r(t),s.d(t,{assets:()=>Z,contentTitle:()=>X,default:()=>se,frontMatter:()=>W,metadata:()=>Y,toc:()=>ee});var a=s(3274),r=s(5618),i=s(6862),n=s(752),c=s(5230),l=s(5785),o=s(6686),m=s.n(o),u=s(4207);const d=/\s+(#|\/{2}|\[|\/\*)(.*)/,x=/[><=!]+/,p=/[><=!]+(\S+)/;function g(e){if(!e.includes("d"))return;const t=e.match(p);let s;if(t){e=e.replace(p,"");const a=t[1],r=a.match(/[+-\/\*\^]/)?.[0],i=t[0].match(x)?.[0];if(r){const t=a.replace(x,"").replace(/\s/g,""),r=(0,c._3)(t);e=e.replace(p,`${i}${r}`),s={sign:i,value:r}}else s={sign:i,value:parseInt(a,10)}}const a=e.matchAll(/(\+|\-|%|\/|\^|\*|\*{2})(\d+)/gi);let r;for(const c of a)if(r){const e=r.sign;let t=r.value;e&&(t=f(e,t,parseInt(c[2],10))),r={sign:c[1],value:t}}else r={sign:c[1],value:parseInt(c[2],10)};if(e.match(/\d+?#(.*)/)){const t=e.split("#"),a=parseInt(t[0],10),i=t[1].replace(d,""),n=t[1].match(d),c=n?n[2]:void 0,l=new u.eJ;for(let e=0;e<a;e++)l.roll(i);return{dice:i,result:l.output,comment:c,compare:s||void 0,modifier:r}}const i=new u.eJ,n=e.replace(d,"");i.roll(n);const l=e.match(d),o=l?l[2]:void 0;return{dice:e,result:i.output,comment:o,compare:s||void 0,modifier:r}}function f(e,t,s){return"^"===e&&(e="**"),(0,c._3)(`${s} ${e} ${t}`)}function h(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(e){const t=/(?<formula>\{{2}(.+?)\}{2})/gim.exec(e);if(t?.groups?.formula){const a=t.groups.formula.replaceAll("{{","").replaceAll("}}","");try{const s=(0,c._3)(a);return v(e.replace(t.groups.formula,s.toString()))}catch(s){throw new Error(`[error.invalidFormula, common.space]: ${t.groups.formula}`)}}return v(e)}function v(e){return e.replaceAll("+-","-").replaceAll("--","+").replaceAll("++","+")}function j(e,t){if(!t.statistics)return e;e=m()(e);const s=Object.keys(t.statistics).map((e=>m()(e).toLowerCase()));let a=e;for(const r of s){const s=new RegExp(h(r),"gi");if(e.match(s)){let i,n;const c=t.statistics?.[r];c&&(i=t.statistics[m()(r).toLowerCase()].max,n=t.statistics[m()(r).toLowerCase()].min);const l=w(t.total||100,i,n);a=e.replace(s,l.toString())}}return b(a)}function y(e){const t={diceType:"",statistics:{}};if(e.statistics){if(e.statistics&&Object.keys(e.statistics).length>0)for(const[r,i]of Object.entries(e.statistics)){const e=i;if(e.max&&e.min&&e.max<=e.min)throw new Error("[error.maxGreater]");e.max&&e.max<=0&&(e.max=void 0),e.min&&e.min<=0&&(e.min=void 0);let s=e.combinaison?m()(e.combinaison).toLowerCase():void 0;s=s&&s.trim().length>0?s:void 0,t.statistics||(t.statistics={}),t.statistics[r]={max:e.max,min:e.min,combinaison:s||void 0}}}else t.statistics=void 0;if(e.diceType)try{t.diceType=e.diceType,function(e,t){if(!t.statistics)return e;const s=Object.keys(t.statistics).find((e=>!t.statistics?.[e].combinaison));if(!s)return e;const a=t.statistics[s],{min:r,max:i}=a,n=w(t.total||100,i,r);b(e.replace("$",n.toString()))}(e.diceType,t)}catch(s){throw new Error(s.message)}e.critical&&Object.keys(e.critical).length>0&&(t.critical={failure:e.critical.failure??void 0,success:e.critical.success??void 0}),e.total&&(e.total<=0&&(e.total=void 0),t.total=e.total),e.charName&&(t.charName=e.charName),e.damage&&(t.damage=e.damage);try{!function(e){if(!e.damage)return;if(0===Object.keys(e.damage).length)throw new Error("[error.emptyObject]");if(Object.keys(e.damage).length>25)throw new Error("[error.tooManyDice]");for(const[s,a]of Object.entries(e.damage)){if(!a)continue;const r=j(a,e);try{g(r)}catch(t){throw new Error(`[error.invalidDice, common.space] ${s}`)}}}(t),function(e){if(!e.statistics)return;const t=Object.fromEntries(Object.entries(e.statistics).filter((e=>{let[t,s]=e;return void 0!==s.combinaison}))),a=Object.fromEntries(Object.entries(e.statistics).filter((e=>{let[t,s]=e;return!s.combinaison})));if(0===Object.keys(t).length)return;const r=Object.keys(e.statistics).filter((t=>!e.statistics[t].combinaison));if(0===r.length)throw new Error("[error.noStat]");const i=[];for(const[n,l]of Object.entries(t)){let t=l.combinaison;for(const[s,r]of Object.entries(a)){const{max:a,min:i}=r,n=w(e.total||100,a,i),c=new RegExp(s,"gi");t=t.replace(c,n.toString())}try{(0,c._3)(t)}catch(s){i.push(n)}}if(i.length>0)throw new Error(`[error.invalidFormula, common.space] ${i.join(", ")}`)}(t)}catch(a){throw new Error(a.message)}return t}function w(e,t,s){void 0===e&&(e=100);let a=e+1;for(;a>=e;){const r=new l.o8;a=t&&s?r.integer(s,t):t?r.integer(0,t):s?r.integer(s,e):r.integer(0,e)}return a}var N=s(7051),T=s(5490),$=s(1924),k=s(845);const C=e=>{let{onClick:t}=e;return(0,a.jsx)(k.A,{onClick:t,size:"small",children:(0,a.jsx)($.A,{})})};var S=s(8954),L=s(2115);const A=e=>{let{className:t,label:s,name:r}=e;return(0,a.jsx)(n.D0,{name:r,children:e=>{let{field:r}=e;return(0,a.jsx)(S.A,{className:t,control:(0,a.jsx)(L.A,{"aria-label":r.name,onChange:r.onChange,checked:r.checked,name:r.name,value:r.value}),labelPlacement:"start",label:s})}})},O=e=>{let{children:t,label:s,onAdd:r}=e;return(0,a.jsxs)("section",{className:"flex flex-col",children:[(0,a.jsxs)("span",{className:"text-lg font-bold mb-2",children:[s,r&&(0,a.jsx)(C,{onClick:r})]}),t]})};var E=s(1881);const M=e=>(0,a.jsx)(n.D0,{name:e.name,children:t=>{let{field:s,form:{errors:r}}=t;return(0,a.jsx)(E.A,{...e,value:s.value,onChange:e.onChange??s.onChange,onBlur:s.onBlur,autoFocus:e.autoFocus,className:`xl:w-[200px] !mb-0 min-[0px]:max-xl:w-full ${e.className}`,error:void 0!==r[s.name],label:e.label,size:"small",name:s.name,type:e.type,typeof:e.type})}}),_=e=>(0,a.jsx)(n.D0,{name:e.name,children:t=>{let{field:s,form:{errors:r}}=t;return(0,a.jsx)(E.A,{...e,value:s.value,onChange:e.onChange??s.onChange,onBlur:s.onBlur,autoFocus:e.autoFocus,className:`!mb-4 w-[400px] min-[0px]:max-xl:w-full ${e.className}`,error:void 0!==r[s.name],label:e.label,size:"small",name:s.name,type:e.type,typeof:e.type,inputProps:e.inputProps})}});function D(e,t){return e.failure===e.success||"failure"===t&&e.failure<0||"success"===t&&e.success<0?"error":""}const R=e=>{let{critical:t}=e;return(0,a.jsxs)(O,{label:"Critique",children:[(0,a.jsx)(_,{label:(0,N.T)({message:"Succ\xe8s"}),name:"critical.success",type:"number",id:"critical",className:`success ${D(t,"success")}`,inputProps:{min:0}}),(0,a.jsx)(_,{label:(0,N.T)({message:"\xc9chec"}),name:"critical.failure",type:"number",id:"critical",className:`failure ${D(t,"failure")}`,inputProps:{min:0}}),(s=t,s.failure===s.success?(0,a.jsx)(T.m_,{id:"critical",anchorSelect:"#critical",content:(0,N.T)({message:"Les deux valeurs ne peuvent \xeatre identiques"}),style:{background:"var(--rt-color-error)"}}):s.failure<0?(0,a.jsx)(T.m_,{id:"critical",anchorSelect:".failure",content:(0,N.T)({message:"La valeur ne peut pas \xeatre inf\xe9rieure \xe0 0"}),style:{background:"var(--rt-color-error)"}}):s.success<0?(0,a.jsx)(T.m_,{id:"critical",anchorSelect:".success",content:(0,N.T)({message:"La valeur ne peut pas \xeatre inf\xe9rieure \xe0 0"}),style:{background:"var(--rt-color-error)"}}):void 0)]});var s};var I=s(9474),B=s(3411);const F=e=>{let{onClick:t}=e;return(0,a.jsx)(k.A,{onClick:t,size:"small",children:(0,a.jsx)(B.A,{})})};var P=s(9576);const q=e=>{let{onClick:t}=e;return(0,a.jsx)(k.A,{onClick:t,size:"small",children:(0,a.jsx)(P.A,{})})},z=e=>{let{values:t}=e;const[s,r]=(0,I.useState)([]);(0,I.useEffect)((()=>{(()=>{const e=[];t.damages.forEach(((s,a)=>{const r=t.damages.findIndex(((e,t)=>t!==a&&e.name===s.name));-1===r||e.includes(a)||(e.push(a),e.push(r))})),r(e)})()}),[t.damages]);const i=e=>s.includes(e)?(0,a.jsx)(T.m_,{id:`Nom-${e}`,content:(0,N.T)({message:"Ce nom est d\xe9j\xe0 utilis\xe9"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Nom-${e}`}):0===t.damages[e].name.length?(0,a.jsx)(T.m_,{id:`Nom-${e}`,content:(0,N.T)({message:"Le nom ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Nom-${e}`}):null;return(0,a.jsx)("div",{className:"statistic",children:(0,a.jsx)(n.ED,{name:"damages",children:e=>{let{push:r,remove:c}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)(O,{label:(0,N.T)({message:"D\xe9s"}),onAdd:()=>r({name:"",value:""}),children:""}),(0,a.jsx)("table",{className:"w-full",children:(0,a.jsx)("tbody",{className:"divide-y block w-full",children:t.damages.map(((e,l)=>(0,a.jsxs)("tr",{className:"flex flex-col xl:flex-row items-start xl:w-full "+(s.includes(l)?"bg-rose-300":""),children:[(0,a.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,a.jsx)(M,{name:`damages[${l}].name`,label:(0,N.T)({message:"Nom"}),className:""+(0===t.damages[l].name.length?"error":""),id:`Nom-${l}`}),(0,a.jsx)(n.Kw,{name:`damages[${l}].name`})]}),(0,a.jsx)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:(0,a.jsx)(M,{name:`damages[${l}].value`,label:(0,N.T)({message:"Valeur"}),className:""+(0===t.damages[l].name.length?"error":""),id:`Value-${l}`})}),i(l),0===t.damages[l].name.length&&(0,a.jsx)(T.m_,{id:`Value-${l}`,content:(0,N.T)({message:"La valeur ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Value-${l}`}),(0,a.jsxs)("td",{colSpan:2,children:[(0,a.jsx)(q,{onClick:()=>c(l)}),(0,a.jsx)(F,{onClick:()=>{r({name:"",value:t.damages[l].value})}})]})]},l)))})})]})}})})},V=()=>(0,a.jsxs)(O,{label:"G\xe9n\xe9ral",children:[(0,a.jsx)(A,{className:"self-start !ml-0 -mt-2 mb-6",label:(0,N.T)({message:"Rendre obligatoire le nom du personnage"}),name:"isCharNameRequired"}),(0,a.jsx)(_,{label:(0,N.T)({message:"Total"}),name:"total",id:"total",type:"number",inputProps:{min:0}}),(0,a.jsx)(_,{label:(0,N.T)({message:"D\xe9 principal"}),name:"diceType"})]});var U=s(5640);const G=e=>{let{values:t}=e;const[s,r]=(0,I.useState)([]);(0,I.useEffect)((()=>{(()=>{const e=[];t.statistics.forEach(((s,a)=>{const r=t.statistics.findIndex(((e,t)=>t!==a&&e.name===s.name));-1===r||e.includes(a)||(e.push(a),e.push(r))})),r(e)})()}),[t.statistics]);const i=e=>{if(t.statistics[e].min)return t.statistics[e].min&&t.statistics[e].max&&t.statistics[e].min>t.statistics[e].max?(0,a.jsx)(T.m_,{id:`Min-${e}`,content:(0,N.T)({message:"La valeur minimale ne peut pas \xeatre sup\xe9rieure \xe0 la valeur maximale"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Min-${e}`}):t.statistics[e].min<0?(0,a.jsx)(T.m_,{id:`Min-${e}`,content:(0,N.T)({message:"La valeur minimale ne peut pas \xeatre n\xe9gative"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Min-${e}`}):isNaN(parseInt(t.statistics[e].min,10))?(0,a.jsx)(T.m_,{id:`Min-${e}`,content:(0,N.T)({message:"La valeur minimale doit \xeatre un nombre"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Min-${e}`}):null},c=e=>{if(t.statistics[e].max)return t.statistics[e].min&&t.statistics[e].max&&t.statistics[e].min>t.statistics[e].max?(0,a.jsx)(T.m_,{id:`Max-${e}`,content:(0,N.T)({message:"La valeur maximale ne peut pas \xeatre inf\xe9rieure \xe0 la valeur minimale"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Max-${e}`}):t.statistics[e].max<0?(0,a.jsx)(T.m_,{id:`Max-${e}`,content:(0,N.T)({message:"La valeur maximale ne peut pas \xeatre n\xe9gative"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Max-${e}`}):isNaN(parseInt(t.statistics[e].max,10))?(0,a.jsx)(T.m_,{id:`Max-${e}`,content:(0,N.T)({message:"La valeur maximale doit \xeatre un nombre"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Max-${e}`}):null},l=e=>{if(t.statistics[e].min)return U.log(t.statistics[e].min,t.statistics[e].max),t.statistics[e].min&&t.statistics[e].max&&t.statistics[e].min>t.statistics[e].max||t.statistics[e].min<0||isNaN(parseInt(t.statistics[e].min,10))?"error":""},o=e=>{if(t.statistics[e].max)return t.statistics[e].min&&t.statistics[e].max&&t.statistics[e].min>t.statistics[e].max||t.statistics[e].max<0||isNaN(parseInt(t.statistics[e].max,10))?"error":""},m=e=>{if(0===t.statistics[e].name.length)return"error"};return(0,a.jsx)("div",{className:"statistic",children:(0,a.jsx)(n.ED,{name:"statistics",children:e=>{let{push:r,remove:u}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)(O,{label:(0,N.T)({message:"Statistiques"}),onAdd:()=>r({name:"",values:{min:0,max:0,combinaison:""}}),children:""}),(0,a.jsx)("table",{className:"w-full",children:(0,a.jsx)("tbody",{className:"divide-y block w-full",children:t.statistics.map(((e,d)=>{return(0,a.jsxs)("tr",{className:`\n\t\t\t\t\t\t\t\t\t\tflex flex-col xl:flex-row items-start xl:w-full ${0===d?"border-t-0":""}  ${s.includes(d)?"bg-rose-300":""} xl:h-18`,children:[(0,a.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,a.jsx)(M,{label:(0,N.T)({message:"Nom"}),name:`statistics[${d}].name`,id:`Nom-${d}`,className:`${m(d)}`,"data-tooltip-variant":"error"}),(0,a.jsx)(n.Kw,{name:`statistics[${d}].name`}),(x=d,0===t.statistics[x].name.length?(0,a.jsx)(T.m_,{id:`Nom-${x}`,content:(0,N.T)({message:"Le nom ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Nom-${x}`}):s.includes(x)?(0,a.jsx)(T.m_,{id:`Nom-${x}`,content:(0,N.T)({message:"Ce nom est d\xe9j\xe0 utilis\xe9"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Nom-${x}`}):null)]}),(0,a.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,a.jsx)(M,{type:"number",inputProps:{min:0},name:`statistics[${d}].min`,label:(0,N.T)({message:"Min"}),className:`xl:w-[100px] ${l(d)}`,id:`Min-${d}`,"data-tooltip-variant":"error",disabled:!!t.statistics[d].combinaison}),i(d)]}),(0,a.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,a.jsx)(M,{type:"number",inputProps:{min:0},name:`statistics[${d}].max`,label:(0,N.T)({message:"Max"}),id:`Max-${d}`,className:`xl:w-[100px] ${o(d)}`,disabled:!!t.statistics[d].combinaison}),c(d)]}),(0,a.jsx)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:(0,a.jsx)(M,{label:(0,N.T)({message:"Combinaison"}),name:`statistics[${d}].combinaison`,disabled:!(!t.statistics[d].min&&!t.statistics[d].max)})}),(0,a.jsxs)("td",{colSpan:2,children:[(0,a.jsx)(q,{onClick:()=>u(d)}),(0,a.jsx)(F,{onClick:()=>{r({name:"",values:t.statistics[d].values})}})]})]},d);var x}))})})]})}})})};var J=s(5640);function K(e){switch(J.error(e),e){case"error.emptyObject":return(0,N.T)({message:"L'objet est vide"});case"common.space":return(0,N.T)({message:" : "});case"error.invalidDice.withoutDice":case"error.invalidDice":return(0,N.T)({message:"Le d\xe9 est invalide"});case"error.invalidFormula":return(0,N.T)({message:"La formule est invalide"});case"error.maxGreater":return(0,N.T)({message:"Le maximum est sup\xe9rieur au minimum"});case"error.tooManyDice":return(0,N.T)({message:"Trop de d\xe9s (max : 25)"});case"error.noStat":return(0,N.T)({message:"Aucune statistique n'a \xe9t\xe9 trouv\xe9e"})}}var H=s(6937);const Q=()=>{const e=e=>{let t={},s={};for(const i of e.statistics)t[i.name]={combinaison:i.combinaison,max:i.max,min:i.min};for(const i of e.damages)s[i.name]=i.value;0===Object.keys(t).length&&(t=void 0),0===Object.keys(s).length&&(s=void 0);const a={charName:e.isCharNameRequired,critical:e.critical,diceType:e.diceType,total:e.total,statistics:t,damage:s};try{const e=y(a),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download="statisticalTemplate.json",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}catch(r){const e=function(e){const t=e.message,s=t.match(/\[(.*)\]/gi);let a="";if(s){const e=s[0].replace("[","").replace("]","").split(",");for(const t of e)a+=K(t.trim())}return a+t.replace(/\[(.*)\]/gi,"")}(r);alert(e)}},t=e=>(()=>{if(!(0,H.A)())return!1;const e=document.getElementsByClassName("error"),t=document.getElementsByClassName("bg-rose-300");return e.length>0||t.length>0})()?(0,a.jsx)(i.A,{type:"submit",disabled:!0,variant:"outlined",size:"medium",id:"disabledButton",className:"download-button",children:(0,N.T)({message:"T\xe9l\xe9charger le mod\xe8le"})}):(0,a.jsx)(i.A,{type:"submit",disabled:e,variant:"outlined",size:"medium",className:"download-button",children:(0,N.T)({message:"T\xe9l\xe9charger le mod\xe8le"})});return(0,a.jsx)(n.l1,{initialValues:{isCharNameRequired:!1,statistics:[],total:0,diceType:"",critical:{success:20,failure:1},damages:[]},onSubmit:(t,s)=>{let{setSubmitting:a}=s;setTimeout((()=>{e(t),a(!1)}),400)},children:e=>{let{isSubmitting:s,values:r}=e;return(0,a.jsxs)(n.lV,{children:[(0,a.jsx)(V,{}),(0,a.jsx)(R,{critical:r.critical}),(0,a.jsx)(G,{values:r}),(0,a.jsx)(z,{values:r}),t(s)]})}})},W={sidebar_label:"Model creation generator",title:"Template creation generator"},X=void 0,Y={id:"model/register/form",title:"Template creation generator",description:"The following form will help you create a configuration file template for your server. The verification procedures are the same as for the bot, so if you have any errors, you can correct them here rather than manually.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/model/register/form.mdx",sourceDirName:"model/register",slug:"/model/register/form",permalink:"/en/docs/model/register/form",draft:!1,unlisted:!1,editUrl:"https://github.com/Dicelette/docs/tree/main/docs/model/register/form.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Model creation generator",title:"Template creation generator"},sidebar:"model",previous:{title:"Reference's server model",permalink:"/en/docs/model/register/template"},next:{title:"Limitation",permalink:"/en/docs/model/register/limitation"}},Z={},ee=[];function te(e){const t={p:"p",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:'The following form will help you create a configuration file template for your server. The verification procedures are the same as for the bot, so if you have any errors, you can correct them here rather than manually.\nThen simply click on "Download template" to obtain a ready-to-use configuration file.'}),"\n",(0,a.jsx)(Q,{})]})}function se(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(te,{...e})}):te(e)}},4654:()=>{},4149:()=>{},9780:()=>{},9926:()=>{},124:()=>{},1220:()=>{},8854:()=>{},5222:()=>{}}]);