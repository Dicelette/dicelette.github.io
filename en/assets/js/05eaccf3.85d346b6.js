"use strict";(self.webpackChunkdicelette_docs=self.webpackChunkdicelette_docs||[]).push([[8371],{86300:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>x,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"introduction/expression","title":"Dice Notations","description":"The bot uses the dice roller library for dice rolls and supports its syntax.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/introduction/expression.mdx","sourceDirName":"introduction","slug":"/introduction/expression","permalink":"/en/docs/introduction/expression","draft":false,"unlisted":false,"editUrl":"https://github.com/Dicelette/i18n/tree/main/en/docusaurus-plugin-content-docs/current/introduction/expression.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Dice Notations","sidebar_position":4},"sidebar":"introduction","previous":{"title":"Syntax","permalink":"/en/docs/introduction/format"},"next":{"title":"Glossary","permalink":"/en/docs/introduction/glossary"}}');var o=s(74848),l=s(28453),r=s(31589);const t={title:"Dice Notations",sidebar_position:4},c=void 0,d={},a=[{value:"Differences with Dice Roller",id:"differences-with-dice-roller",level:2},{value:"Extended Syntax for Comments",id:"extended-syntax-for-comments",level:3},{value:"Comparators",id:"comparators",level:3},{value:"Opposition Comparison",id:"opposition-comparison",level:4},{value:"Critical Successes and Failures",id:"critical-successes-and-failures",level:3},{value:"Mathematical Expressions with MathJS",id:"mathematical-expressions-with-mathjs",level:2},{value:"Examples of Mathematical Expressions",id:"examples-of-mathematical-expressions",level:3},{value:"Shared Unique Rolls (Reusing Results)",id:"shared-unique-rolls-reusing-results",level:2},{value:"Bulk Rolls",id:"bulk-rolls",level:2}];function h(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["The bot uses the ",(0,o.jsx)(n.a,{href:"https://dice-roller.github.io/documentation/",children:"dice roller"}),(0,o.jsx)(n.sup,{children:(0,o.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})," library for dice rolls and supports its syntax.\nHowever, there are some differences as Dicelette aims to be more flexible and display dice roll results in a more readable way."]}),"\n",(0,o.jsx)(n.h2,{id:"differences-with-dice-roller",children:"Differences with Dice Roller"}),"\n",(0,o.jsx)(n.h3,{id:"extended-syntax-for-comments",children:"Extended Syntax for Comments"}),"\n",(0,o.jsxs)(n.p,{children:["Dicelette extends the Dice Roller syntax by taking inspiration from ",(0,o.jsx)(n.a,{href:"https://invent.kde.org/rolisteam/rolisteam-diceparser/-/blob/master/HelpMe.md#comment",children:"Dice Parser"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The use of ",(0,o.jsx)(n.code,{children:"# comment"})," in addition to the basic syntax for comments."]}),"\n",(0,o.jsxs)(n.li,{children:["The ability to use ",(0,o.jsx)(n.code,{children:"[comment]"})," to annotate a shared dice roll, providing context for each result line."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"comparators",children:"Comparators"}),"\n",(0,o.jsxs)(n.p,{children:["By default, when a comparison sign (",(0,o.jsx)(n.code,{children:">"}),", ",(0,o.jsx)(n.code,{children:"<"}),", ",(0,o.jsx)(n.code,{children:"="}),", etc.) is present, the bot will consider the total and the compared value (while rolling and/or calculating if necessary) and indicate whether the roll is a failure or a success:"]}),"\n",(0,o.jsx)(n.admonition,{type:"roll",children:(0,o.jsxs)(n.mdxAdmonitionTitle,{children:[" ",(0,o.jsx)(n.strong,{children:"Success"})," \u2014 ",(0,o.jsx)(n.code,{children:"1d20"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[20]"})," = ",(0,o.jsx)(n.code,{children:"[20] > 10"})]})}),"\n",(0,o.jsxs)(n.p,{children:["However, some systems require counting the number of rolls above (or below) a value rather than comparing the total result.\nTo maintain compatibility between Dicelette and Dice Roller, the roll must be enclosed in curly braces ",(0,o.jsx)(n.code,{children:"{}"}),", such as ",(0,o.jsx)(n.code,{children:"{3d12>20}"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"roll",children:(0,o.jsxs)(n.mdxAdmonitionTitle,{children:[" ",(0,o.jsx)(n.code,{children:"{3d12>20} \u27f6 {[11, 9, 7]} =  [0] "})]})}),"\n",(0,o.jsxs)(n.p,{children:["In these specific cases, the bot will not display success, failure, or critical text, and does the same when using ",(0,o.jsx)(n.a,{href:"https://dice-roller.github.io/documentation/guide/notation/group-rolls.html#target-failure-dice-pool",children:"target failure"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"{1d3}>20"})," will yield the same result as ",(0,o.jsx)(n.code,{children:"1d3>20"})]}),"\n",(0,o.jsxs)(n.li,{children:["But ",(0,o.jsx)(n.strong,{children:"not"})," ",(0,o.jsx)(n.code,{children:"{1d3,1d6}>20"}),", which retains the default Dice Roller syntax. To compare the total to a value, use ",(0,o.jsx)(n.code,{children:"1d3+1d6>20"}),"."]}),"\n"]})}),"\n",(0,o.jsx)(n.admonition,{type:"tldr",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["If you want to count the number of dice passing a comparison, you must enclose the die and comparator in curly braces ",(0,o.jsx)(n.code,{children:"{}"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"If you want to use target failures, you must retain the Dice Roller syntax."}),"\n"]})}),"\n",(0,o.jsx)(n.h4,{id:"opposition-comparison",children:"Opposition Comparison"}),"\n",(0,o.jsxs)(n.p,{children:["A die roll can be compared to an opposition using the following syntax: ",(0,o.jsx)(n.code,{children:"dice[base comparison][opposition]"}),".\n\u26a0\ufe0f An opposition cannot be used alone: it acts as a secondary validation, and therefore requires a base comparison to function."]}),"\n",(0,o.jsx)(n.admonition,{title:"1d20>10>5",type:"roll",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Success"})," \u2014 ",(0,o.jsx)(n.code,{children:"1d20"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[20]"})," = ",(0,o.jsx)(n.code,{children:"[20] > 5"})," (",(0,o.jsx)(n.strong,{children:"opposition"}),")  & ",(0,o.jsx)(n.code,{children:"> 10"})," (",(0,o.jsx)(n.strong,{children:"base"}),")"]})}),"\n",(0,o.jsx)(n.h3,{id:"critical-successes-and-failures",children:"Critical Successes and Failures"}),"\n",(0,o.jsx)(n.p,{children:"You can define thresholds for critical successes and failures in dice rolls using the following syntax:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(r.CL,{children:"Critical Failure"}),": ",(0,o.jsx)(n.code,{children:"{cf:[sign](value)}"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(r.CL,{children:"Critical Success"}),": ",(0,o.jsx)(n.code,{children:"{cs:[sign](value)}"})]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["This expression can be placed anywhere in the dice roll, except after a comment, and must be ",(0,o.jsx)(n.strong,{children:"attached"})," directly to the die (no space between the die and the expression)."]}),"\n",(0,o.jsx)(n.p,{children:"Where:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"sign"})," is the comparison operator (",(0,o.jsx)(n.code,{children:">"}),", ",(0,o.jsx)(n.code,{children:"<"}),", ",(0,o.jsx)(n.code,{children:"="}),", etc.)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"value"})," can be a number, a die, a math expression, or a statistic (just like ",(0,o.jsx)(n.a,{href:"/en/docs/sheet/model/critics#custom-critics",children:"custom criticals"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"*"})," (optional) allows comparison only on the ",(0,o.jsx)(n.strong,{children:"natural die"})," (the first dice roll), not the total."]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"roll",children:(0,o.jsxs)(n.mdxAdmonitionTitle,{children:[" ",(0,o.jsx)(n.strong,{children:"Critical Failure"})," \u2014 ",(0,o.jsx)(n.code,{children:"1d20>=20{cf:>10}"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[20]"})," = ",(0,o.jsx)(n.code,{children:"20 > 10"})]})}),"\n",(0,o.jsx)(n.admonition,{type:"roll",children:(0,o.jsxs)(n.mdxAdmonitionTitle,{children:[" ",(0,o.jsx)(n.strong,{children:"Critical Success"})," \u2014 ",(0,o.jsx)(n.code,{children:"{cs:<2}1d20<=1"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[1]"})," = ",(0,o.jsx)(n.code,{children:"1 < 2"})]})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["The full formula syntax is: ",(0,o.jsx)(n.code,{children:"{c[f|s]:[>=<!]+(text)}"})]})}),"\n",(0,o.jsx)(n.admonition,{title:" This method is not compatible with the exceptions mentioned in the previous section.",type:"warning"}),"\n",(0,o.jsx)(n.h2,{id:"mathematical-expressions-with-mathjs",children:"Mathematical Expressions with MathJS"}),"\n",(0,o.jsxs)(n.p,{children:["The bot uses the ",(0,o.jsx)(n.a,{href:"https://mathjs.org/",children:"mathjs"})," library to evaluate mathematical expressions. You can use complex mathematical expressions when they are enclosed in ",(0,o.jsx)(n.code,{children:"{{"})," and ",(0,o.jsx)(n.code,{children:"}}"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Depending on the commands, you can use:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"$"}),": Represents the value of the used statistic."]}),"\n",(0,o.jsx)(n.li,{children:"The name of a statistic (which will be replaced by its value)."}),"\n",(0,o.jsxs)(n.li,{children:["Dice combinations (like ",(0,o.jsx)(n.code,{children:"1d6"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"{exp}"}),": This syntax allows you to directly insert an expression into the die, reusing the calculated part of the command. A default value can be specified using the syntax ",(0,o.jsx)(n.code,{children:"{exp||default}"})," (e.g., ",(0,o.jsx)(n.code,{children:"{exp||2}"}),"). Otherwise, the default value will be ",(0,o.jsx)(n.code,{children:"1"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Expressions are generally used in:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(r.CL,{children:"success_threshold"}),": Success threshold for dice rolls in the ",(0,o.jsx)(n.a,{href:"/en/docs/usage/model/dice#dbroll-dbroll",children:(0,o.jsx)(n.code,{children:"/dbroll"})})," command."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(r.CL,{children:"expression"}),": For the ",(0,o.jsx)(n.a,{href:"/en/docs/usage/model/calc#based-on-statistics-calc",children:(0,o.jsx)(n.code,{children:"/calc"})}),", ",(0,o.jsx)(n.a,{href:"/en/docs/usage/model/dice#dbroll-dbroll",children:(0,o.jsx)(n.code,{children:"/dbroll"})}),", and ",(0,o.jsx)(n.a,{href:"/en/docs/usage/model/dice#macro-macro",children:(0,o.jsx)(n.code,{children:"/macro"})})," commands."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(r.CL,{children:"opposition"}),": For the ",(0,o.jsx)(n.a,{href:"/en/docs/usage/model/dice#dbroll-dbroll",children:(0,o.jsx)(n.code,{children:"/dbroll"})})," and ",(0,o.jsx)(n.a,{href:"/en/docs/usage/model/dice#macro-macro",children:(0,o.jsx)(n.code,{children:"/macro"})})," commands."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"examples-of-mathematical-expressions",children:"Examples of Mathematical Expressions"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"1d6 + {{ceil($ / 2)}}"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"1d6 > {{ceil($ / 2)}}"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"shared-unique-rolls-reusing-results",children:"Shared Unique Rolls (Reusing Results)"}),"\n",(0,o.jsxs)(n.p,{children:["You can use the syntax ",(0,o.jsx)(n.code,{children:"die;&+x;\xb5*y"})," to roll a single die and apply different formulas to the same die, displaying the result of each formula. The ",(0,o.jsx)(n.code,{children:"&"})," represents the die result."]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsx)(n.p,{children:"You must not have spaces before or after the separator between formulas, otherwise the bot will treat the rest as comments."})}),"\n",(0,o.jsxs)(n.admonition,{type:"example",children:[(0,o.jsx)(n.p,{children:"/roll 1d20;&+5;&*2\nWill display the result as:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"  \u203b `1d20` \u27f6 `[10]` = ` 10 `  \n  \u25c8 `[1d20]+5` \u27f6 `[10]+5` = ` 15 `  \n  \u25c8 `[1d20]\xd72` \u27f6 `[10]\xd72` = ` 20 `  \n"})})]}),"\n",(0,o.jsx)(n.p,{children:":::"}),"\n",(0,o.jsxs)(n.admonition,{type:"tip",children:[(0,o.jsx)(n.p,{children:"You can use dice in the formulas, but only the first die will be saved and reused."}),(0,o.jsxs)(n.admonition,{type:"roll",children:[(0,o.jsxs)(n.mdxAdmonitionTitle,{children:[" ",(0,o.jsx)(n.code,{children:"1d20;&+1d4;&*2"})]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"  \u203b `1d20` \u27f6 `[7]` = ` 7 `  \n  \u25c8 `[1d20]+1d4` \u27f6 `7+[1]` = ` 8 `  \n  \u25c8 `[1d20]\xd72` \u27f6 `[7]\xd72` = ` 14 `  \n"})})]})]}),"\n",(0,o.jsxs)(n.p,{children:["To comment between each roll, use the ",(0,o.jsx)(n.code,{children:"[comment]"})," syntax. A global comment should use the ",(0,o.jsx)(n.code,{children:"#comment"})," syntax at the end of the dice.",(0,o.jsx)(n.sup,{children:(0,o.jsx)(n.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})})]}),"\n",(0,o.jsxs)(n.admonition,{type:"roll",children:[(0,o.jsxs)(n.mdxAdmonitionTitle,{children:[" ",(0,o.jsx)(n.code,{children:"1d20;&-2 [hp loss] #comments"})]}),(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.em,{children:"comments"}),"\n\u203b ",(0,o.jsx)(n.code,{children:"1d20"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[2]"})," = ",(0,o.jsx)(n.code,{children:"2"}),(0,o.jsx)(n.br,{}),"\n","\u25c8 ",(0,o.jsx)("u",{children:"hp loss"})," \u2014 ",(0,o.jsx)(n.code,{children:"[1d20]-2"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[2]-2"})," = ",(0,o.jsx)(n.code,{children:"0"})]})]}),"\n",(0,o.jsxs)(n.p,{children:["Finally, it is possible to hide the first die using the syntax ",(0,o.jsx)(n.code,{children:"(die)"}),":"]}),"\n",(0,o.jsxs)(n.admonition,{type:"roll",children:[(0,o.jsxs)(n.mdxAdmonitionTitle,{children:[" ",(0,o.jsx)(n.code,{children:"(1d20);&>100;&+2"})]}),(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Failure"})," \u2014 ",(0,o.jsx)(n.code,{children:"[1d20]>100"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[12]>100"})," = ",(0,o.jsx)(n.code,{children:"12<100"}),(0,o.jsx)(n.br,{}),"\n","\u25c8 ",(0,o.jsx)(n.code,{children:"[1d20]+2"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[12]+2"})," = ",(0,o.jsx)(n.code,{children:"14"})]})]}),"\n",(0,o.jsx)(n.admonition,{title:"It is not possible to use bulk dice in this syntax.",type:"danger"}),"\n",(0,o.jsx)(n.h2,{id:"bulk-rolls",children:"Bulk Rolls"}),"\n",(0,o.jsxs)(n.p,{children:["The bot also supports the ",(0,o.jsx)(n.code,{children:"x#(dice)"})," notation, inspired by ",(0,o.jsx)(n.a,{href:"https://rollem.rocks/docs/v1-syntax/bulk-rolling",children:"rollem"}),' for "bulk rolls".']}),"\n",(0,o.jsxs)(n.admonition,{type:"roll",children:[(0,o.jsxs)(n.mdxAdmonitionTitle,{children:[" ",(0,o.jsx)(n.code,{children:"4#2d10"})]}),(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"2d10"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[2, 7]"})," = ",(0,o.jsx)(n.code,{children:"[9]"}),(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.code,{children:"2d10"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[2, 8]"})," = ",(0,o.jsx)(n.code,{children:"[10]"}),(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.code,{children:"2d10"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[4, 3]"})," = ",(0,o.jsx)(n.code,{children:"[7]"}),(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.code,{children:"2d10"})," \u27f6 ",(0,o.jsx)(n.code,{children:"[8, 9]"})," = ",(0,o.jsx)(n.code,{children:"[17]"})]})]}),"\n","\n",(0,o.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,o.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{id:"user-content-fn-1",children:["\n",(0,o.jsxs)(n.p,{children:["Dice Roller itself uses ",(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/random-js",children:"random-js"})," for random generation, not ",(0,o.jsx)(n.code,{children:"math.random"})," which is pseudo-random. So it's not possible to cheat on dice results (unless you're a cryptomancer or can see the future... Or both.). ",(0,o.jsx)(n.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{id:"user-content-fn-2",children:["\n",(0,o.jsxs)(n.p,{children:["Shared dice and comments are very sensitive to spaces. Thus, bracketed dice comments must be preceded by a space, as must global comments. The ",(0,o.jsx)(n.code,{children:"#"})," in global comments must be pasted into the comment text, without spaces. ",(0,o.jsx)(n.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},31589:(e,n,s)=>{s.d(n,{CL:()=>o});var i=s(74848);function o(e){let{children:n,...s}=e;return(0,i.jsx)("span",{style:{textDecoration:"underline",fontWeight:"bold",...s.style||{}},...s,children:n})}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>t});var i=s(96540);const o={},l=i.createContext(o);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);