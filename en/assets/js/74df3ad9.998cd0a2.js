(self.webpackChunkdicelette_docs=self.webpackChunkdicelette_docs||[]).push([[8069],{45624:(e,s,t)=>{"use strict";t.r(s),t.d(s,{assets:()=>he,contentTitle:()=>pe,default:()=>be,frontMatter:()=>xe,metadata:()=>a,toc:()=>ge});const a=JSON.parse('{"id":"sheet/form","title":"Model generator","description":"The following form will help you create a configuration file template for your server. The verification procedures are the same as for the bot, so if you have any errors, you can correct them here rather than manually.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/sheet/form.mdx","sourceDirName":"sheet","slug":"/sheet/form","permalink":"/en/docs/sheet/form","draft":false,"unlisted":false,"editUrl":"https://github.com/Dicelette/i18n/tree/main/en/docusaurus-plugin-content-docs/current/sheet/form.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Model generator","title":"Model generator"},"sidebar":"model","next":{"title":"Registering an user","permalink":"/en/docs/sheet/user"}}');var l=t(74848),i=t(28453),r=t(18653),n=t(67512),c=t(4308),o=t(45145),m=t(21312),u=t(92303),d=t(78465),x=t.n(d),p=t(29644),h=t.n(p),g=t(42503);function f(e,s){return""!==e.success.toString()&&""!==e.failure.toString()&&e.failure===e.success&&e.failure>=0&&e.success>=0||"failure"===s&&e.failure<0||"success"===s&&e.success<0?"error":""}var b=t(37399),j=t(4671);const v=e=>{let{len:s,type:t,onClick:a}=e;const i="dice"===t?(0,m.T)({message:"Ajouter une macro"}):(0,m.T)({message:"Ajouter une statistique"}),n="dice"===t?(0,m.T)({message:"macros"}):(0,m.T)({message:"statistiques (max 25)"}),c=`${(0,m.T)({message:"Vous avez atteint le nombre maximum de"})} ${n}`;return"stats"===t?(0,l.jsx)(r.A,{title:s>=25?c:i,arrow:!0,children:(0,l.jsx)("span",{children:(0,l.jsx)(j.A,{onClick:a,size:"small",className:"manage-button",disabled:s>=25,children:(0,l.jsx)(b.In,{icon:"fluent:add-circle-12-regular",height:"20"})})})}):(0,l.jsx)(r.A,{title:i,arrow:!0,children:(0,l.jsx)("span",{children:(0,l.jsx)(j.A,{onClick:a,size:"small",className:"manage-button",children:(0,l.jsx)(b.In,{icon:"fluent:add-circle-12-regular",height:"20"})})})})};var N=t(35181),C=t(47461);const y=e=>{let{className:s,label:t,name:a,labelPlacement:i}=e;return(0,l.jsx)(c.D0,{name:a,children:e=>{let{field:a}=e;return(0,l.jsx)(N.A,{className:s,control:(0,l.jsx)(C.A,{onChange:a.onChange,checked:a.checked,name:a.name,value:a.value,id:a.name}),labelPlacement:i||"start",label:t})}})},w=e=>{let{length:s,type:t,children:a,label:i,onAdd:r}=e;return(0,l.jsxs)("section",{className:"flex flex-col",children:[(0,l.jsxs)("span",{className:"text-lg font-bold mb-2 heading-2",children:[i,r&&(0,l.jsx)(v,{len:s,type:t,onClick:r})]}),a]})};var T=t(50767),$=t(96540);const k=e=>{let{field:s,meta:t,form:a,props:i}=e;const[r,n]=(0,$.useState)(s.value),c=(0,$.useRef)(void 0);(0,$.useEffect)((()=>{n(s.value)}),[s.value]);return(0,l.jsx)(T.A,{...i,value:r,onChange:e=>{const{name:s,value:t}=e.target;n(t),c.current&&window.clearTimeout(c.current),c.current=window.setTimeout((()=>{a.setFieldValue(s,t,!1)}),120)},onBlur:s.onBlur,autoFocus:i.autoFocus,className:`2xl:w-[200px] !mb-0 min-[0px]:max-2xl:w-full ${i.className}`,error:!!t.error,label:i.label,size:"small",name:s.name,type:i.type,typeof:i.type})},S=e=>(0,l.jsx)(c.B0,{name:e.name,children:s=>{let{field:t,meta:a,form:i}=s;return(0,l.jsx)(k,{field:t,meta:a,form:i,props:e})}}),D=e=>(0,l.jsx)(c.D0,{name:e.name,children:s=>{let{field:t,form:{errors:a}}=s;return(0,l.jsx)(T.A,{...e,value:t.value,onChange:e.onChange??t.onChange,onBlur:t.onBlur,autoFocus:e.autoFocus,className:`${e.classmargin??"!mb-4"} w-[400px] min-[0px]:max-xl:w-full ${e.className}`,error:void 0!==a[t.name],label:e.label,size:"small",name:t.name,type:e.type,typeof:e.type,inputProps:e.inputProps})}}),M=e=>{let{critical:s}=e;return(0,l.jsxs)(w,{label:"Critique",children:[(0,l.jsx)(D,{label:(0,m.T)({message:"Succ\xe8s"}),name:"critical.success",type:"number",id:"critical",className:`success ${f(s,"success")}`,inputProps:{min:0}}),(0,l.jsx)(D,{label:(0,m.T)({message:"\xc9chec"}),name:"critical.failure",type:"number",id:"critical",className:`failure ${f(s,"failure")}`,inputProps:{min:0}}),(t=s,""!==t.success.toString()&&""!==t.failure.toString()&&t.failure===t.success&&t.failure>=0&&t.success>=0?(0,l.jsx)(g.m_,{id:"critical",anchorSelect:"#critical",content:(0,m.T)({message:"Les deux valeurs ne peuvent \xeatre identiques"}),style:{background:"var(--rt-color-error)"}}):t.failure<0?(0,l.jsx)(g.m_,{id:"critical",anchorSelect:".failure",content:(0,m.T)({message:"La valeur ne peut pas \xeatre inf\xe9rieure \xe0 0"}),style:{background:"var(--rt-color-error)"}}):t.success<0?(0,l.jsx)(g.m_,{id:"critical",anchorSelect:".success",content:(0,m.T)({message:"La valeur ne peut pas \xeatre inf\xe9rieure \xe0 0"}),style:{background:"var(--rt-color-error)"}}):void 0)]});var t};var A=t(44675),z=t(88166);const L=e=>{let{onClick:s,size:t,maxLen:a,length:i}=e;const n=1280===t?"xl":"2xl";return(0,l.jsx)(r.A,{title:(0,m.T)({message:"Dupliquer ce champ"}),classes:{popper:i>=a?"error-copy":"copy-tooltip"},arrow:!0,children:(0,l.jsx)(j.A,{onClick:s,size:"small",className:`manage-button !p-px relative top-2.5 min-[0px]:max-${n}:w-full`,"aria-label":(0,m.T)({message:"Dupliquer ce champ"}),disabled:i>=a,children:(0,l.jsx)(b.In,{icon:"system-uicons:duplicate",height:"24",className:"copy-button"})})})},I=e=>{let{onClick:s,size:t,maxLen:a,length:i}=e;const r=1280===t?"xl":"2xl";return(0,l.jsxs)(n.A,{onClick:s,className:`!p-1 relative ${r}:top-2.5 min-[0px]:max-${r}:w-full copy-button`,variant:"outlined",size:"medium","aria-label":(0,m.T)({message:"Dupliquer ce champ"}),title:(0,m.T)({message:"Dupliquer ce champ"}),disabled:i>=a,children:[(0,l.jsx)(b.In,{icon:"system-uicons:duplicate",height:"24",className:"copy-button text-button"}),(0,m.T)({message:"Dupliquer"})]})},_=e=>{let{onClick:s,size:t,maxLen:a,length:i}=e;const r=(0,A.A)(),n=(0,$.useMemo)((()=>r.breakpoints.down(t)),[r,t]),c=(0,z.A)(n),o=(0,$.useMemo)((()=>({onClick:s,size:t,maxLen:a,length:i})),[s,t,a,i]);return c?(0,l.jsx)(I,{...o}):(0,l.jsx)(L,{...o})},q=e=>{let{onClick:s,size:t}=e;const a=1280===t?"xl":"2xl";return(0,l.jsx)(r.A,{title:(0,m.T)({message:"Supprimer ce champ"}),classes:{popper:"remove"},arrow:!0,children:(0,l.jsx)(j.A,{onClick:s,size:"small",className:`manage-button !p-px relative top-2.5 min-[0px]:max-${a}:w-full`,"aria-label":(0,m.T)({message:"Supprimer ce champ"}),children:(0,l.jsx)(b.In,{icon:"lucide:delete",height:"24",className:"delete-button"})})})},F=e=>{let{onClick:s,size:t}=e;const a=1280===t?"xl":"2xl";return(0,l.jsxs)(n.A,{onClick:s,className:`!p-1 relative ${a}:top-2.5 min-[0px]:max-${a}:w-full delete-button`,variant:"outlined",size:"medium","aria-label":(0,m.T)({message:"Supprimer ce champ"}),children:[(0,l.jsx)(b.In,{icon:"lucide:delete",height:"24",className:"delete-button text-button"}),(0,m.T)({message:"Supprimer"})]})},R=e=>{let{onClick:s,size:t}=e;const a=(0,A.A)(),i=(0,$.useMemo)((()=>a.breakpoints.down(t)),[a,t]),r=(0,z.A)(i),n=(0,$.useMemo)((()=>({onClick:s,size:t})),[s,t]);return r?(0,l.jsx)(F,{...n}):(0,l.jsx)(q,{...n})},P=(e,s,t)=>s.includes(e)?(0,l.jsx)(g.m_,{id:`Dice-Nom-${e}`,content:(0,m.T)({message:"Ce nom est d\xe9j\xe0 utilis\xe9"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Dice-Nom-${e}`}):0===t.name.length?(0,l.jsx)(g.m_,{id:`Dice-Nom-${e}`,content:(0,m.T)({message:"Le nom ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Dice-Nom-${e}`}):null;var V=t(85642);const U=e=>{let{duplicateIndices:s,index:t,dices:a,push:i,remove:r}=e;const n=a[t],{name:o,value:u}=n,d=(0,$.useMemo)((()=>0===o.length),[o]);return(0,l.jsx)(V.sx,{draggableId:String(n.id||t),index:t,children:e=>(0,l.jsxs)("tr",{ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,className:`flex flex-col xl:flex-row items-start xl:w-full ${s.includes(t)?"error-bg":""} ${0===t?"border-t-0":""}`,children:[(0,l.jsx)("td",{className:"p-px min-[0px]:max-2xl:p-2 table-cell min-[0px]:max-xl:w-full",children:(0,l.jsx)(_,{maxLen:25,length:a.length,size:1280,onClick:()=>{i({name:o,value:u})}})}),(0,l.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,l.jsx)(S,{name:`damages[${t}].name`,label:(0,m.T)({message:"Nom"}),className:""+(d?"error":""),id:`Dice-Nom-${t}`}),(0,l.jsx)(c.Kw,{name:`damages[${t}].name`}),P(t,s,n)]}),(0,l.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,l.jsx)(S,{name:`damages[${t}].value`,label:(0,m.T)({message:"Valeur"}),className:""+(d?"error":""),id:`Value-${t}`}),d&&(0,l.jsx)(g.m_,{id:`Value-${t}`,content:(0,m.T)({message:"La valeur ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Value-${t}`})]}),(0,l.jsx)("td",{className:"p-px min-[0px]:max-2xl:p-2 table-cell min-[0px]:max-xl:w-full",children:(0,l.jsx)(R,{size:1280,onClick:()=>r(t)})})]})},n.id||t)},E=(0,$.memo)(U),B=e=>{let{values:s,setFieldValue:t}=e;const a=(0,$.useRef)(0);(0,$.useEffect)((()=>{s.damages.length>a.current&&(s.damages.forEach((e=>{e.id||(e.id=crypto.randomUUID())})),a.current=s.damages.length)}),[s.damages]);const i=(0,$.useMemo)((()=>{const e=new Map,t=[];return s.damages.forEach(((s,a)=>{if(!s.name)return;const l=e.get(s.name);void 0!==l?t.push(l,a):e.set(s.name,a)})),Array.from(new Set(t))}),[s.damages]),r=(0,$.useCallback)((e=>{if(!e.destination)return;if(e.source.index===e.destination.index)return;const a=[...s.damages],[l]=a.splice(e.source.index,1);a.splice(e.destination.index,0,l),t("damages",a)}),[s.damages,t]);return(0,l.jsx)("div",{className:"statistic",children:(0,l.jsx)(c.ED,{name:"damages",children:e=>{let{push:t,remove:a}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)(w,{length:s.damages.length,type:"dice",label:(0,m.T)({message:"Macros"}),onAdd:()=>t({id:crypto.randomUUID(),name:"",value:""}),children:""}),(0,l.jsx)("table",{className:"w-full",children:(0,l.jsx)(V.JY,{onDragEnd:r,children:(0,l.jsx)(V.gL,{droppableId:"droppable",children:e=>(0,l.jsxs)("tbody",{...e.droppableProps,ref:e.innerRef,className:"divide-y block w-full",children:[s.damages.map(((e,r)=>(0,l.jsx)(E,{duplicateIndices:i,index:r,dices:s.damages,push:t,remove:a},s.damages[r].id||r))),e.placeholder]})})})})]})}})})},O=()=>(0,l.jsxs)(w,{label:"G\xe9n\xe9ral",children:[(0,l.jsx)(y,{className:"self-start !ml-0 -mt-2",label:(0,m.T)({message:"Rendre obligatoire le nom du personnage"}),name:"isCharNameRequired"}),(0,l.jsx)(y,{className:"self-start !ml-0 -mt-2",label:(0,m.T)({message:"Fiches priv\xe9es"}),"aria-label":(0,m.T)({message:"Utilis\xe9e uniquement dans le CSV d'importation de fiche"}),name:"isPrivate"}),(0,l.jsx)(g.m_,{anchorSelect:"#isPrivate",content:(0,m.T)({message:"Utilis\xe9e uniquement dans le CSV d'importation de fiche"})}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:gap-4 ",children:[(0,l.jsx)("div",{className:"flex-none",children:(0,l.jsx)(D,{label:(0,m.T)({message:"Total"}),name:"total",id:"total",type:"number",inputProps:{min:0},className:"flex-1",classmargin:"sm:!mb-4"})}),(0,l.jsx)(y,{label:(0,m.T)({message:"Forcer la distribution des points"}),labelPlacement:"end",name:"forceDistrib",className:"flex items-center gap-1","aria-label":(0,m.T)({message:"Renvoie une erreur si la somme des statistiques est inf\xe9rieure au total d\xe9fini"})}),(0,l.jsx)(g.m_,{anchorSelect:"#forceDistrib",content:(0,m.T)({message:"Renvoie une erreur si la somme des statistiques est inf\xe9rieure au total d\xe9fini"})})]}),(0,l.jsx)(D,{label:(0,m.T)({message:"D\xe9 principal"}),name:"diceType"})]});var J=t(16026);const K=e=>"naturalDice"===e?{title:(0,m.T)({message:"Affecter uniquement les d\xe9s naturels"}),value:"onNaturalDice",icon:{selected:"game-icons:dice-target",unselected:"game-icons:perspective-dice-six-faces-three"},class:"onNatDice"}:"excludedStat"===e?{title:(0,m.T)({message:"Exclure de la s\xe9lection des d\xe9s de statistiques"}),value:"excludedStat",icon:{selected:"fluent:table-simple-exclude-16-regular",unselected:"fluent:table-simple-include-16-filled"},class:"excludedStat"}:{title:(0,m.T)({message:"Utilisable sur les macros"}),value:"affectSkill",icon:{selected:"pepicons-pencil:sword-shield-circle",unselected:"pepicons-pencil:sword-shield-circle-off"},class:"affectSkill"},H=e=>{let{selected:s,onChange:t,size:a,opt:i}=e;const n=1280===a?"xl":"2xl",c=K(i);return(0,l.jsx)(r.A,{title:c.title,classes:{popper:`toggle-tooltip ${c.class}`},arrow:!0,children:(0,l.jsx)(J.A,{value:c.value,size:"small",onChange:t,selected:s,className:`manage-button !p-px relative top-1 min-[0px]:max-${n}:w-full toggle !border-[0px] align-middle ${c.class}`,children:(0,l.jsx)(b.In,{icon:s?c.icon.selected:c.icon.unselected,height:"32",className:`text-button toggle-button ml-[5px] ${s?"checked":""} ${c.class}`})})})},Y=e=>{let{selected:s,onChange:t,size:a,opt:i}=e;const r=1280===a?"xl":"2xl",n=K(i);return(0,l.jsxs)(J.A,{value:n.value,className:`!p-1 relative ${r}:top-2.5 min-[0px]:max-${r}:w-full toggle-button toggle ${n.class}`,size:"small",selected:s,onChange:t,"aria-label":n.title,title:n.title,children:[(0,l.jsx)(b.In,{icon:n.icon.selected,height:"24",className:"text-button dice-button"}),n.title]})};function G(e){let{selected:s,onChange:t,size:a,opt:i}=e;const r=(0,A.A)(),n=(0,$.useMemo)((()=>r.breakpoints.down(a)),[r,a]),c=(0,z.A)(n),o=(0,$.useMemo)((()=>({selected:s,onChange:t,size:a,opt:i})),[s,t,a,i]);return c?(0,l.jsx)(Y,{...o}):(0,l.jsx)(H,{...o})}const X=e=>"number"==typeof e||!Number.isNaN(Number(e))&&"string"==typeof e,Z=(e,s)=>X(e)&&Number.parseInt(e,10)<s,Q=(e,s)=>{if(!s.min)return;const{min:t,max:a}=s;return t?t&&a&&t>a?(0,l.jsx)(g.m_,{id:`Min-${e}`,content:(0,m.T)({message:"La valeur minimale ne peut pas \xeatre sup\xe9rieure \xe0 la valeur maximale"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Min-${e}`}):Z(t,0)?(0,l.jsx)(g.m_,{id:`Min-${e}`,content:(0,m.T)({message:"La valeur minimale ne peut pas \xeatre n\xe9gative"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Min-${e}`}):X(t)?null:(0,l.jsx)(g.m_,{id:`Min-${e}`,content:(0,m.T)({message:"La valeur minimale doit \xeatre un nombre"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Min-${e}`}):void 0},W=(e,s)=>{const{min:t,max:a}=s;if(a)return t&&a&&t>a?(0,l.jsx)(g.m_,{id:`Max-${e}`,content:(0,m.T)({message:"La valeur maximale ne peut pas \xeatre inf\xe9rieure \xe0 la valeur minimale"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Max-${e}`}):Z(a,0)?(0,l.jsx)(g.m_,{id:`Max-${e}`,content:(0,m.T)({message:"La valeur maximale ne peut pas \xeatre n\xe9gative"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Max-${e}`}):X(a)?null:(0,l.jsx)(g.m_,{id:`Max-${e}`,content:(0,m.T)({message:"La valeur maximale doit \xeatre un nombre"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Max-${e}`})},ee=(e,s,t)=>0===t.length?(0,l.jsx)(g.m_,{id:`Stats-Nom-${e}`,content:(0,m.T)({message:"Le nom ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Stats-Nom-${e}`}):s.includes(e)?(0,l.jsx)(g.m_,{id:`Stats-Nom-${e}`,content:(0,m.T)({message:"Ce nom est d\xe9j\xe0 utilis\xe9"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Stats-Nom-${e}`}):null,se=e=>{let{statIndex:s,duplicateIndices:t,push:a,remove:i,statistics:r,setFieldValue:n}=e;const o=r[s],{max:u,min:d,combinaison:x,excluded:p,name:h}=o,g=(0,$.useMemo)((()=>(e=>{if(0===e.length)return"error"})(h)),[h]),f=(0,$.useMemo)((()=>(e=>{const{min:s,max:t}=e;if(s)return s&&t&&s>t||Z(s,0)||Number.isNaN(Number.parseInt(String(s),10))?"error":""})(o)),[o.min,o.max,o.combinaison]),b=(0,$.useMemo)((()=>(e=>{const{min:s,max:t}=e;if(t)return s&&t&&s>t||Z(t,0)?"error":X(t)?"":"error"})(o)),[o.min,o.max,o.combinaison]);return(0,l.jsx)(V.sx,{draggableId:String(o.id||s),index:s,children:e=>(0,l.jsxs)("tr",{ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,className:`flex flex-col 2xl:flex-row items-start 2xl:w-full ${0===s?"border-t-0":""}  ${t.includes(s)?"error-bg":""} 2xl:h-18`,children:[(0,l.jsx)("td",{className:"p-px min-[0px]:max-2xl:p-2 table-cell min-[0px]:max-2xl:w-full",children:(0,l.jsx)(_,{size:1536,length:r.length,maxLen:25,onClick:()=>{a({name:"",max:u,min:d,combinaison:x,excluded:p})}})}),(0,l.jsxs)("td",{className:"p-2 min-[0px]:max-2xl:w-full",children:[(0,l.jsx)(S,{label:(0,m.T)({message:"Nom"}),name:`statistics[${s}].name`,id:`Stats-Nom-${s}`,className:`${g}`,"data-tooltip-variant":"error"}),(0,l.jsx)(c.Kw,{name:`statistics[${s}].name`}),ee(s,t,h)]}),(0,l.jsxs)("td",{className:"p-2 min-[0px]:max-2xl:w-full",children:[(0,l.jsx)(S,{type:"number",inputProps:{min:0},name:`statistics[${s}].min`,label:(0,m.T)({message:"Min"}),className:`2xl:w-[100px] ${f}`,id:`Min-${s}`,"data-tooltip-variant":"error",disabled:!!x}),Q(s,o)]}),(0,l.jsxs)("td",{className:"p-2 min-[0px]:max-2xl:w-full",children:[(0,l.jsx)(S,{type:"number",inputProps:{min:0},name:`statistics[${s}].max`,label:(0,m.T)({message:"Max"}),id:`Max-${s}`,className:`2xl:w-[100px] ${b}`,disabled:!!x}),W(s,o)]}),(0,l.jsx)("td",{className:"p-2 min-[0px]:max-2xl:w-full ",children:(0,l.jsx)(S,{label:(0,m.T)({message:"Combinaison"}),name:`statistics[${s}].combinaison`,disabled:!(!d&&!u)})}),(0,l.jsx)("td",{className:"p-2 min-[0px]:max-2xl:w-full ",children:(0,l.jsx)(G,{selected:!!p,onChange:()=>n(`statistics[${s}].excluded`,!p),size:1280,opt:"excludedStat"})}),(0,l.jsx)("td",{className:"p-px min-[0px]:max-2xl:p-2 table-cell min-[0px]:max-2xl:w-full ",children:(0,l.jsx)(R,{size:1536,onClick:()=>i(s)})})]})},o.id||s)},te=(0,$.memo)(se),ae=e=>{let{values:s,setFieldValue:t}=e;const a=(0,$.useRef)(0);(0,$.useEffect)((()=>{s.statistics.length>a.current&&(s.statistics.forEach((e=>{e.id||(e.id=crypto.randomUUID())})),a.current=s.statistics.length)}),[s.statistics]);const i=(0,$.useMemo)((()=>{const e=new Map,t=[];return s.statistics.forEach(((s,a)=>{if(!s.name)return;const l=e.get(s.name);void 0!==l?t.push(l,a):e.set(s.name,a)})),Array.from(new Set(t))}),[s.statistics]),r=(0,$.useCallback)((e=>{if(!e.destination)return;if(e.source.index===e.destination.index)return;const a=[...s.statistics],[l]=a.splice(e.source.index,1);a.splice(e.destination.index,0,l),t("statistics",a)}),[s.statistics,t]);return(0,l.jsx)("div",{className:"statistic",children:(0,l.jsx)(c.ED,{name:"statistics",children:e=>{let{push:a,remove:n}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)(w,{type:"stats",length:s.statistics.length,label:(0,m.T)({message:"Statistiques"}),onAdd:()=>a({id:crypto.randomUUID(),name:"",min:"",max:"",combinaison:"",excluded:!1}),children:""}),(0,l.jsx)("table",{className:"w-full",children:(0,l.jsx)(V.JY,{onDragEnd:r,children:(0,l.jsx)(V.gL,{droppableId:"droppable",children:e=>(0,l.jsxs)("tbody",{...e.droppableProps,ref:e.innerRef,className:"divide-y block w-full",children:[s.statistics.map(((e,r)=>(0,l.jsx)(te,{statIndex:r,duplicateIndices:i,push:a,remove:n,statistics:s.statistics,setFieldValue:t},s.statistics[r].id||r))),e.placeholder]})})})})]})}})})};var le=t(73698);const ie=e=>{let{index:s,idName:t,duplicateIndices:a,customCritical:i}=e;return a.includes(s)&&"selection"!==t?(0,l.jsx)(g.m_,{id:`Critical-${t}-${s}`,content:(0,m.T)({message:"Ce nom est d\xe9j\xe0 utilis\xe9"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Critical-${t}-${s}`}):0===i?.[t].length?(0,l.jsx)(g.m_,{id:`Critical-${t}-${s}`,content:(0,m.T)({message:"Le texte ne peut pas \xeatre vide"}),style:{background:"var(--rt-color-error)"},anchorSelect:`#Critical-${t}-${s}`}):null},re=e=>{let{index:s,duplicateIndices:t,push:a,remove:i,customCritical:r,setFieldValue:n}=e;const o=r[s],{onNaturalDice:u,affectSkill:d,selection:x,name:p,formula:h}=o,g=(0,$.useMemo)((()=>0===x.length),[x]),f=(0,$.useMemo)((()=>0===p.length),[p]),b=(0,$.useMemo)((()=>0===h.length),[h]);return(0,l.jsx)(V.sx,{draggableId:String(o.id||s),index:s,children:e=>(0,l.jsxs)("tr",{ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,className:`flex flex-col xl:flex-row items-start xl:w-full ${t.includes(s)?"error-bg":""} ${0===s?"border-t-0":""}`,children:[(0,l.jsx)("td",{className:"p-px min-[0px]:max-2xl:p-2 table-cell min-[0px]:max-xl:w-full",children:(0,l.jsx)(_,{maxLen:22,length:r.length,size:1280,onClick:()=>{var e;a({...(e=r[s],{selection:e.selection,name:e?.name,formula:e?.formula,text:e?.text,onNaturalDice:e?.onNaturalDice,affectSkill:e?.affectSkill})})}})}),(0,l.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,l.jsx)(le.A,{size:"small",slotProps:{paper:{className:"autocomplete"}},id:`Critical-selection-${s}`,className:"autocomplete 2xl:w-[200px] !mb-0 min-[0px]:max-2xl:w-full",style:{fontFamily:"Fira Code VF"},options:[">",">=","<","<=","==","!="],value:x||"",onChange:(e,t)=>n(`customCritical[${s}].selection`,t||""),renderInput:e=>(0,l.jsx)(T.A,{size:"medium",...e,label:(0,m.T)({message:"Signe"}),style:{fontFamily:"Fira Code VF"},variant:"outlined",className:"2xl:w-[200px] !mb-0 min-[0px]:max-2xl:w-full "+(g?"error":"")})}),(0,l.jsx)(c.Kw,{name:`customCritical[${s}].selection`}),ie({index:s,idName:"selection",duplicateIndices:t,customCritical:o})]}),(0,l.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full",children:[(0,l.jsx)(S,{name:`customCritical[${s}].name`,label:(0,m.T)({message:"Nom"}),variant:"outlined",className:""+(f?"error":""),id:`Critical-name-${s}`}),(0,l.jsx)(c.Kw,{name:`customCritical[${s}].name`}),ie({index:s,idName:"name",duplicateIndices:t,customCritical:o})]}),(0,l.jsxs)("td",{className:"p-2 min-[0px]:max-xl:w-full h-200px",children:[(0,l.jsx)(S,{name:`customCritical[${s}].formula`,label:(0,m.T)({message:"Formule"}),variant:"outlined",className:""+(b?"error":""),id:`Critical-formula-${s}`}),(0,l.jsx)(c.Kw,{name:`customCritical[${s}].formula`}),ie({index:s,idName:"formula",duplicateIndices:t,customCritical:o})]}),(0,l.jsx)("td",{className:"p-2 min-[0px]:max-xl:w-full h-200px",children:(0,l.jsx)(G,{selected:u,onChange:()=>n(`customCritical[${s}].onNaturalDice`,!u),size:1280,opt:"naturalDice"})}),(0,l.jsx)("td",{className:"p-2 min-[0px]:max-xl:w-full h-200px",children:(0,l.jsx)(G,{selected:d,onChange:()=>n(`customCritical[${s}].affectSkill`,!d),size:1280,opt:"affectSkill"})}),(0,l.jsx)("td",{className:"p-px min-[0px]:max-2xl:p-2 table-cell min-[0px]:max-xl:w-full",children:(0,l.jsx)(R,{size:1280,onClick:()=>i(s)})})]})},o.id||s)},ne=(0,$.memo)(re),ce=e=>{let{values:s,setFieldValue:t}=e;const a=(0,$.useRef)(0);(0,$.useEffect)((()=>{s.customCritical.length>a.current&&(s.customCritical.forEach((e=>{e.id||(e.id=crypto.randomUUID())})),a.current=s.customCritical.length)}),[s.customCritical]);const i=(0,$.useMemo)((()=>{const e=new Map,t=[];return s.customCritical.forEach(((s,a)=>{if(!s.name)return;const l=e.get(s.name);void 0!==l?t.push(l,a):e.set(s.name,a)})),Array.from(new Set(t))}),[s.customCritical]),r=(0,$.useCallback)((e=>{if(!e.destination)return;if(e.source.index===e.destination.index)return;const a=[...s.customCritical],[l]=a.splice(e.source.index,1);a.splice(e.destination.index,0,l),t("customCritical",a)}),[s.customCritical,t]);return(0,l.jsx)("div",{className:"statistic",children:(0,l.jsx)(c.ED,{name:"customCritical",children:e=>{let{push:a,remove:n}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)(w,{length:s.customCritical.length,type:"critical",label:(0,m.T)({message:"Critiques Personnalis\xe9s"}),onAdd:()=>a({id:crypto.randomUUID(),selection:">=",name:"",formula:"",text:"",onNaturalDice:!1,affectSkill:!1}),children:""}),(0,l.jsx)("table",{className:"w-full",children:(0,l.jsx)(V.JY,{onDragEnd:r,children:(0,l.jsx)(V.gL,{droppableId:"droppable",children:e=>(0,l.jsxs)("tbody",{...e.droppableProps,ref:e.innerRef,className:"divide-y block w-full",children:[s.customCritical.map(((e,r)=>(0,l.jsx)(ne,{index:r,duplicateIndices:i,push:a,remove:n,customCritical:s.customCritical,setFieldValue:t},s.customCritical[r].id||r))),e.placeholder]})})})})]})}})})};var oe=t(96763);function me(e){if(e&&X(e))return Number.parseInt(e.toString(),10)}const ue=e=>{const s=["user","charName","avatar","channel"];e.isPrivate&&s.push("isPrivate"),e.statistics.length>0&&s.push(...Object.keys(e.statistics)),s.push("dice");const t=`\ufeff${s.join(";")}\n`,a=new Blob([t],{type:"text/csv"}),l=URL.createObjectURL(a),i=document.createElement("a");i.href=l,i.download="import.csv",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)},de=()=>{const e=e=>{const s={},t={},a={};if(e.statistics.length>0)for(const c of e.statistics)s[c.name]={combinaison:c.combinaison,max:me(c.max),min:me(c.min),exclude:c.excluded};if(e.damages.length>0)for(const c of e.damages)t[c.name]=c.value;if(e.customCritical.length>0)for(const c of e.customCritical)a[c.name]={sign:c.selection,value:c.formula,onNaturalDice:c.onNaturalDice,affectSkill:c.affectSkill};const l={success:e.critical.success&&X(e.critical.success)?Number.parseInt(e.critical.success.toString(),10):void 0,failure:e.critical.failure&&X(e.critical.failure)?Number.parseInt(e.critical.failure.toString(),10):void 0},i=me(e.total),r={charName:e.isCharNameRequired,forceDistrib:e.forceDistrib,critical:l,diceType:e.diceType,total:i,statistics:e.statistics.length>0?s:void 0,damage:e.damages.length>0?t:void 0,customCritical:e.customCritical.length>0?a:void 0};try{const e=(0,o.Ff)(r);e.$schema="https://raw.githubusercontent.com/Dicelette/core/refs/heads/main/dicelette.schema.json";const s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=[{name:"config.json",url:URL.createObjectURL(s)}];for(const a of t){const e=document.createElement("a");e.href=a.url,e.download=a.name,document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(a.url)}}catch(n){const e=function(e){return oe.error(e),e instanceof o.C2?"createCriticalCustom"===e.cause?(0,m.T)({message:"Le d\xe9 de critique est invalide : $ ne peut pas \xeatre utilis\xe9 sans statistiques."}):"no_dice_type"===e.cause?(0,m.T)({message:"Les critiques customis\xe9s ne peuvent pas \xeatre utilis\xe9s sans d\xe9 type."}):"no_roll_result"===e.message||"no_roll_result"===e.cause?(0,m.T)({message:'La macro nomm\xe9e "{{x}}" ("{{formule}}") ne semble pas \xeatre un d\xe9.'}).replace("{{x}}",e.dice).replace("{{formule}}",e.method.toString()):"critical_dice_type"===e.cause?(0,m.T)({message:'Le d\xe9 type "{{x}}" ne peut pas contenir de critiques (ex: 1d100{cs:>=96}{cf:<=5}). Utilisez les critiques customis\xe9s \xe0 la place.'}).replace("{{x}}",e.dice):(0,m.T)({message:'Le d\xe9 "{{x}}" est invalide. Journalisation : {{error}}'}).replace("{{x}}",e.dice).replace("{{error}}",e.method.toString()):e instanceof o.xM?(0,m.T)({message:'La formule "{{x}}" est invalide.'}).replace("{{x}}",e.formula):e instanceof o.VG?(0,m.T)({message:"Le maximum doit \xeatre sup\xe9rieur au minimum"}):e instanceof o.Rq?(0,m.T)({message:"Les macro ont \xe9t\xe9 mal renseign\xe9es."}):e instanceof o.HT?(0,m.T)({message:"Trop de d\xe9s (max : 25)"}):e instanceof o.zZ?(0,m.T)({message:"Aucune statistique n'a \xe9t\xe9 trouv\xe9e"}):e instanceof o.XD?(0,m.T)({message:"Trop de statistiques (max : 25)"}):(0,m.T)({message:"Une erreur est survenue : {{x}}"}).replace("{{x}}",e.message)}(n);h()(x()).fire({html:e,icon:"error",showCloseButton:!0,backdrop:!0,showConfirmButton:!1,customClass:{confirmButton:"hide",popup:["error","swal2-toast"],htmlContainer:["error","swal2-toast"],closeButton:"error"}}).then()}},s=e=>(()=>{if(!(0,u.A)())return!1;const e=document.getElementsByClassName("error"),s=document.getElementsByClassName("error-bg");return e.length>0||s.length>0})()?(0,l.jsx)(r.A,{title:(0,m.T)({message:"Veuillez corriger les erreurs"}),classes:{popper:"error"},arrow:!0,children:(0,l.jsx)("span",{children:(0,l.jsx)(n.A,{type:"submit",disabled:!0,variant:"outlined",size:"medium",id:"disabledButton",className:"download-button",children:(0,m.T)({message:"T\xe9l\xe9charger le mod\xe8le"})})})}):(0,l.jsx)(n.A,{type:"submit",disabled:e,variant:"outlined",size:"medium",className:"download-button",children:(0,m.T)({message:"T\xe9l\xe9charger le mod\xe8le"})});return(0,l.jsx)(c.l1,{initialValues:{isCharNameRequired:!1,isPrivate:!1,statistics:[],total:"",diceType:"",critical:{success:"",failure:""},damages:[],customCritical:[],forceDistrib:!1},onSubmit:(s,t)=>{let{setSubmitting:a}=t;setTimeout((()=>{e(s),a(!1)}),400)},children:e=>{let{isSubmitting:t,values:a,setFieldValue:i}=e;return(0,l.jsxs)(c.lV,{children:[(0,l.jsx)(O,{}),(0,l.jsx)(M,{critical:a.critical}),(0,l.jsx)(ae,{values:a,setFieldValue:i}),(0,l.jsx)(B,{values:a,setFieldValue:i}),(0,l.jsx)(ce,{values:a,setFieldValue:i}),(0,l.jsxs)("div",{id:"form-buttons",className:"flex justify-center gap-2 md:justify-start",children:[s(t),(0,l.jsx)(n.A,{type:"button",onClick:()=>(e=>{ue(e)})(a),variant:"outlined",size:"medium",className:"download-button csv-button",children:(0,m.T)({message:"T\xe9l\xe9charger le CSV"})})]})]})}})},xe={sidebar_position:2,sidebar_label:"Model generator",title:"Model generator"},pe=void 0,he={},ge=[];function fe(e){const s={a:"a",admonition:"admonition",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.p,{children:'The following form will help you create a configuration file template for your server. The verification procedures are the same as for the bot, so if you have any errors, you can correct them here rather than manually.\nThen simply click on "Download template" to obtain a ready-to-use configuration file.'}),"\n",(0,l.jsx)(s.admonition,{type:"note",children:(0,l.jsxs)(s.p,{children:["The \u201c",(0,l.jsx)(s.strong,{children:"Download CSV"}),"\u201d button generates a file that can be used to import several characters at the same time.\nFor more information, please refer to the ",(0,l.jsx)(s.a,{href:"/en/docs/sheet/import_export",children:"documentation"}),"."]})}),"\n",(0,l.jsx)(de,{})]})}function be(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(fe,{...e})}):fe(e)}},78982:()=>{},47790:()=>{},73776:()=>{},21638:()=>{},92668:()=>{},77965:()=>{},66089:()=>{},79368:()=>{},64688:()=>{},51069:()=>{},15340:()=>{},79838:()=>{},41234:()=>{}}]);